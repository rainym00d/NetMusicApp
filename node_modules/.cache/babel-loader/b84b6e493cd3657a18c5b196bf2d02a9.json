{"remainingRequest":"/Users/lsn/GitSpace/musicapp/node_modules/babel-loader/lib/index.js!/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lsn/GitSpace/musicapp/src/components/PlayMusic.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lsn/GitSpace/musicapp/src/components/PlayMusic.vue","mtime":1636459911877},{"path":"/Users/lsn/GitSpace/musicapp/babel.config.js","mtime":1635323562046},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js","mtime":1635338185367},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/babel-loader/lib/index.js","mtime":1635338186090},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js","mtime":1635338185367},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/index.js","mtime":1635338186082}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2xzbi9HaXRTcGFjZS9tdXNpY2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IEljb24gZnJvbSAiQC9jb21wb25lbnRzL0ljb24udnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0x5cmljOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEljb246IEljb24KICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsiaXNQbGF5aW5nIiwgInBsYXlNb2RlIiwgInNob3dQbGF5TXVzaWMiLCAiY3VycmVudFRpbWUiXSkpLCBtYXBHZXR0ZXJzKFsiY3VycmVudE11c2ljIiwgImx5cmljIl0pKSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgY29uc29sZS5sb2codGhpcy5jdXJyZW50TXVzaWMpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGN1cnJlbnRUaW1lOiBmdW5jdGlvbiBjdXJyZW50VGltZSgpIHsKICAgICAgLy8g5q2M6K+N5rua5YqoCiAgICAgIHZhciBwQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmx5cmljIC5hY3RpdmUiKTsKCiAgICAgIGlmICghcEFjdGl2ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHBBY3RpdmUub2Zmc2V0VG9wID4gMTAwKSB7CiAgICAgICAgdGhpcy4kcmVmcy5seXJpYy5zY3JvbGxUb3AgPSBwQWN0aXZlLm9mZnNldFRvcCAtIDEwMDsKICAgICAgfSAvLyB0b2RvIOi/m+W6puadoea7muWKqAoKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGhhbmRsZVRpbWUoY3VycmVudFRpbWUpIHsKICAgIC8vICAgbGV0IHRpbWUgPSBjdXJyZW50VGltZTsKICAgIC8vICAgbGV0IGhvdXIgPSBwYXJzZUludCh0aW1lIC8gMzYwMCk7CiAgICAvLyAgIHRpbWUgPSB0aW1lICUgMzYwMDsKICAgIC8vICAgbGV0IG1pbiA9IHBhcnNlSW50KHRpbWUgLyA2MCk7CiAgICAvLyAgIHRpbWUgPSB0aW1lICUgNjA7CiAgICAvLyAgIGxldCBzZWMgPSBwYXJzZUludCh0aW1lKTsKICAgIC8vICAgaWYgKGhvdXIgPT09IDApIHsKICAgIC8vICAgICByZXR1cm4gdGhpcy5wcmVGaXhJbnRlZ2VyKG1pbiwgMikgKyAiOiIgKyB0aGlzLnByZUZpeEludGVnZXIoc2VjLCAyKTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICByZXR1cm4gKAogICAgLy8gICAgICAgdGhpcy5wcmVGaXhJbnRlZ2VyKGhvdXIsIDIpICsKICAgIC8vICAgICAgICI6IiArCiAgICAvLyAgICAgICB0aGlzLnByZUZpeEludGVnZXIobWluLCAyKSArCiAgICAvLyAgICAgICAiOiIgKwogICAgLy8gICAgICAgdGhpcy5wcmVGaXhJbnRlZ2VyKHNlYywgMikKICAgIC8vICAgICApOwogICAgLy8gICB9CiAgICAvLyB9LAogICAgLy8gcHJlRml4SW50ZWdlcihudW0sIGxlbmd0aCkgewogICAgLy8gICByZXR1cm4gKEFycmF5KGxlbmd0aCkuam9pbigiMCIpICsgbnVtKS5zbGljZSgtbGVuZ3RoKTsKICAgIC8vIH0sCiAgICBnZXRBcnRpc3RzOiBmdW5jdGlvbiBnZXRBcnRpc3RzKGFydGlzdHMpIHsKICAgICAgdmFyIG5hbWVzID0gYXJ0aXN0cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5uYW1lOwogICAgICB9KS5qb2luKCIsICIpOwogICAgICByZXR1cm4gbmFtZXM7CiAgICB9LAogICAgc3dpdGNoU2hvd1BsYXlNdXNpYzogZnVuY3Rpb24gc3dpdGNoU2hvd1BsYXlNdXNpYygpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzd2l0Y2hTaG93UGxheU11c2ljIik7CiAgICB9LAogICAgc3dpdGNoUGxheU1vZGU6IGZ1bmN0aW9uIHN3aXRjaFBsYXlNb2RlKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInN3aXRjaFBsYXlNb2RlIik7CiAgICB9LAogICAgc2hvd0x5cmljOiBmdW5jdGlvbiBzaG93THlyaWMoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudE11c2ljKTsKICAgICAgdGhpcy5pc0x5cmljID0gIXRoaXMuaXNMeXJpYzsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInJlcUx5cmljIiwgewogICAgICAgIGlkOiB0aGlzLmN1cnJlbnRNdXNpYy5pZAogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/lsn/GitSpace/musicapp/src/components/PlayMusic.vue"],"names":[],"mappings":";;;;AAmGA,SAAS,QAAT,EAAmB,UAAnB,QAAqC,MAArC;AAEA,OAAO,IAAP,MAAiB,uBAAjB;AAEA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,OAAO,EAAE;AADJ,KAAP;AAGD,GALY;AAMb,EAAA,UAAU,EAAE;AACV,IAAA,IAAI,EAAJ;AADU,GANC;AASb,EAAA,QAAQ,kCACH,QAAQ,CAAC,CAAC,WAAD,EAAc,UAAd,EAA0B,eAA1B,EAA2C,aAA3C,CAAD,CADL,GAEH,UAAU,CAAC,CAAC,cAAD,EAAiB,OAAjB,CAAD,CAFP,CATK;AAab,EAAA,OAba,qBAaH;AACR,IAAA,OAAO,CAAC,GAAR,CAAY,KAAK,YAAjB;AACD,GAfY;AAgBb,EAAA,KAAK,EAAE;AACL,IAAA,WADK,yBACS;AACZ;AACA,UAAI,OAAM,GAAI,QAAQ,CAAC,aAAT,CAAuB,gBAAvB,CAAd;;AACA,UAAI,CAAC,OAAL,EAAc;AACZ;AACF;;AACA,UAAI,OAAO,CAAC,SAAR,GAAoB,GAAxB,EAA6B;AAC3B,aAAK,KAAL,CAAW,KAAX,CAAiB,SAAjB,GAA6B,OAAO,CAAC,SAAR,GAAoB,GAAjD;AACF,OARY,CASZ;;AACD;AAXI,GAhBM;AA6Bb,EAAA,OAAO,EAAE;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,UAvBO,sBAuBI,OAvBJ,EAuBa;AAClB,UAAI,KAAI,GAAI,OAAO,CAAC,GAAR,CAAY,UAAC,IAAD;AAAA,eAAU,IAAI,CAAC,IAAf;AAAA,OAAZ,EAAiC,IAAjC,CAAsC,IAAtC,CAAZ;AACA,aAAO,KAAP;AACD,KA1BM;AA2BP,IAAA,mBA3BO,iCA2Be;AACpB,WAAK,MAAL,CAAY,MAAZ,CAAmB,qBAAnB;AACD,KA7BM;AA8BP,IAAA,cA9BO,4BA8BU;AACf,WAAK,MAAL,CAAY,MAAZ,CAAmB,gBAAnB;AACD,KAhCM;AAiCP,IAAA,SAjCO,uBAiCK;AACV;AACA,WAAK,OAAL,GAAe,CAAC,KAAK,OAArB;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,UAArB,EAAiC;AAAE,QAAA,EAAE,EAAE,KAAK,YAAL,CAAkB;AAAxB,OAAjC;AACD;AArCM;AA7BI,CAAf","sourcesContent":["<template>\n  <div class=\"playMusic\">\n    <div\n      class=\"background\"\n      :style=\"{ backgroundImage: `url(${currentMusic.al.picUrl})` }\"\n    ></div>\n    <div class=\"top\">\n      <div class=\"left\">\n        <div class=\"back\" @click=\"switchShowPlayMusic\">\n          <icon iconName=\"icon-zuojiantou1\" />\n        </div>\n        <div class=\"content\">\n          <!-- <div class=\"title\"> -->\n          <marquee class=\"title\" behavior=\"scroll\" direction=\"left\">\n            {{ currentMusic.name }}\n          </marquee>\n          <!-- </div> -->\n          <div class=\"artist\">\n            {{ getArtists(currentMusic.ar) }}\n            <div class=\"more\">\n              <icon iconName=\"icon-youjiantou\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"right\">\n        <div class=\"share\">\n          <icon iconName=\"icon-fenxiang\" />\n        </div>\n      </div>\n    </div>\n    <div class=\"playContent\" v-show=\"!isLyric\" @click=\"showLyric\">\n      <img\n        class=\"needle\"\n        :class=\"{ active: isPlaying }\"\n        src=\"@/assets/image/needle-ab.png\"\n        alt=\"\"\n      />\n      <img class=\"disc\" src=\"@/assets/image/disc-plus.png\" alt=\"\" />\n      <img class=\"albumPic\" :src=\"currentMusic.al.picUrl\" alt=\"\" />\n    </div>\n    <div class=\"lyric\" ref=\"lyric\" v-show=\"isLyric\" @click=\"showLyric\">\n      <!-- (item.beginTime <= currentTime * 1000 && currentTime * 1000 < item.endTime) -->\n      <p\n        :class=\"{\n          active:\n            item.beginTime <= currentTime * 1000 &&\n            currentTime * 1000 < item.endTime,\n        }\"\n        v-for=\"(item, idx) in lyric\"\n        :key=\"idx\"\n      >\n        {{ item.lyric }}\n      </p>\n    </div>\n    <!-- <div class=\"progressBar\">\n      <div class=\"currentTime\">{{ handleTime(currentTime) }}</div>\n      <div class=\"bar\"></div>\n      <div class=\"duration\">{{ handleTime($refs.audio.duration) }}</div>\n    </div> -->\n    <div class=\"footer\">\n      <icon\n        v-if=\"playMode === 0\"\n        class=\"playMode\"\n        iconName=\"icon-white\"\n        @click=\"switchPlayMode\"\n      />\n      <icon\n        v-else-if=\"playMode === 1\"\n        class=\"playMode\"\n        iconName=\"icon-white-1\"\n        @click=\"switchPlayMode\"\n      />\n      <icon\n        v-else\n        class=\"playMode\"\n        iconName=\"icon-shuffle-white\"\n        @click=\"switchPlayMode\"\n      />\n      <icon iconName=\"icon-shangyishoushangyige\" />\n      <icon\n        class=\"play\"\n        iconName=\"icon-bofang1\"\n        v-show=\"!isPlaying\"\n        @click=\"$emit('play')\"\n      />\n      <icon\n        class=\"play\"\n        iconName=\"icon-zanting1\"\n        v-show=\"isPlaying\"\n        @click=\"$emit('pause')\"\n      />\n      <icon iconName=\"icon-xiayigexiayishou\" />\n      <icon iconName=\"icon-liebiao_o-copy\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from \"vuex\";\n\nimport Icon from \"@/components/Icon.vue\";\n\nexport default {\n  data() {\n    return {\n      isLyric: false,\n    };\n  },\n  components: {\n    Icon,\n  },\n  computed: {\n    ...mapState([\"isPlaying\", \"playMode\", \"showPlayMusic\", \"currentTime\"]),\n    ...mapGetters([\"currentMusic\", \"lyric\"]),\n  },\n  mounted() {\n    console.log(this.currentMusic);\n  },\n  watch: {\n    currentTime() {\n      // 歌词滚动\n      let pActive = document.querySelector(\".lyric .active\");\n      if (!pActive) {\n        return;\n      }\n      if (pActive.offsetTop > 100) {\n        this.$refs.lyric.scrollTop = pActive.offsetTop - 100;\n      }\n      // todo 进度条滚动\n    },\n  },\n  methods: {\n    // handleTime(currentTime) {\n    //   let time = currentTime;\n    //   let hour = parseInt(time / 3600);\n    //   time = time % 3600;\n    //   let min = parseInt(time / 60);\n    //   time = time % 60;\n    //   let sec = parseInt(time);\n    //   if (hour === 0) {\n    //     return this.preFixInteger(min, 2) + \":\" + this.preFixInteger(sec, 2);\n    //   } else {\n    //     return (\n    //       this.preFixInteger(hour, 2) +\n    //       \":\" +\n    //       this.preFixInteger(min, 2) +\n    //       \":\" +\n    //       this.preFixInteger(sec, 2)\n    //     );\n    //   }\n    // },\n    // preFixInteger(num, length) {\n    //   return (Array(length).join(\"0\") + num).slice(-length);\n    // },\n    getArtists(artists) {\n      let names = artists.map((item) => item.name).join(\", \");\n      return names;\n    },\n    switchShowPlayMusic() {\n      this.$store.commit(\"switchShowPlayMusic\");\n    },\n    switchPlayMode() {\n      this.$store.commit(\"switchPlayMode\");\n    },\n    showLyric() {\n      // console.log(this.currentMusic);\n      this.isLyric = !this.isLyric;\n      this.$store.dispatch(\"reqLyric\", { id: this.currentMusic.id });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.playMusic {\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background: #000;\n  // background: #fff;\n\n  .background {\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-size: auto 100%;\n    background-position: center;\n    filter: blur(60px);\n    z-index: -1;\n  }\n\n  .top {\n    width: 7.5rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding-top: 0.2rem;\n\n    .left {\n      display: flex;\n      align-items: center;\n\n      .back {\n        width: 1rem;\n        font-size: 0.4rem;\n        color: #fff;\n      }\n\n      .content {\n        display: flex;\n        flex-direction: column;\n        text-align: left;\n\n        .title {\n          width: 5rem;\n          font-size: 0.4rem;\n          color: #fff;\n          font-weight: 500;\n        }\n\n        .artist {\n          display: flex;\n          text-align: left;\n          font-size: 0.2rem;\n          color: #ddd;\n        }\n      }\n    }\n    .right {\n      .share {\n        // position: relative;\n        width: 1rem;\n        right: 0;\n        font-size: 0.4rem;\n        color: #fff;\n      }\n    }\n  }\n\n  .playContent {\n    position: absolute;\n    width: 7.5rem;\n    height: 7.5rem;\n    left: 0;\n    top: 1.5rem;\n\n    .needle {\n      width: 2rem;\n      height: auto;\n      position: absolute;\n      left: 50%;\n      transform-origin: 0.4rem 0.4rem;\n      transform: rotate(-30deg);\n      transition: all 1s;\n      z-index: 10;\n    }\n    .needle.active {\n      transform: rotate(5deg);\n      transition: all 1s;\n    }\n\n    .disc {\n      width: 5.5rem;\n      height: 5.5rem;\n      position: absolute;\n      left: calc(50% - 2.75rem);\n      top: 2rem;\n    }\n\n    .albumPic {\n      position: absolute;\n      width: 3.6rem;\n      height: 3.6rem;\n      border-radius: 50%;\n      left: calc(50% - 1.8rem);\n      top: 2.95rem;\n    }\n  }\n\n  .lyric {\n    position: absolute;\n    width: 7.5rem;\n    height: 8rem;\n    top: calc(50% - 4rem);\n    text-align: center;\n    z-index: 5;\n    overflow: scroll;\n    font-size: 0.3rem;\n    color: rgba(256, 256, 256, 0.3);\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n\n    p {\n      padding: 0.1rem 0.2rem;\n    }\n\n    .active {\n      color: #fff;\n    }\n  }\n\n  .progressBar {\n    width: 7.5rem;\n    height: 0.6rem;\n    padding: 0 0.2rem;\n    background: #fff;\n    position: absolute;\n    bottom: 1.4rem;\n  }\n\n  .footer {\n    width: 7.5rem;\n    height: 1.4rem;\n    padding: 0 1rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: absolute;\n    bottom: 0;\n    .icon {\n      fill: #fff;\n      font-size: 0.4rem;\n    }\n    .play {\n      font-size: 0.8rem;\n    }\n  }\n}\n</style>"],"sourceRoot":""}]}