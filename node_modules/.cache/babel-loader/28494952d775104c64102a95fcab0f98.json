{"remainingRequest":"/Users/lsn/code/musicapp/node_modules/babel-loader/lib/index.js!/Users/lsn/code/musicapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lsn/code/musicapp/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lsn/code/musicapp/src/components/PlayController.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/lsn/code/musicapp/src/components/PlayController.vue","mtime":1636101388719},{"path":"/Users/lsn/code/musicapp/babel.config.js","mtime":1635323562046},{"path":"/Users/lsn/code/musicapp/node_modules/cache-loader/dist/cjs.js","mtime":1635338185367},{"path":"/Users/lsn/code/musicapp/node_modules/babel-loader/lib/index.js","mtime":1635338186090},{"path":"/Users/lsn/code/musicapp/node_modules/cache-loader/dist/cjs.js","mtime":1635338185367},{"path":"/Users/lsn/code/musicapp/node_modules/vue-loader-v16/dist/index.js","mtime":1635338186082}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2xzbi9jb2RlL211c2ljYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgSWNvbiBmcm9tICJAL2NvbXBvbmVudHMvSWNvbi52dWUiOwppbXBvcnQgUGxheU11c2ljIGZyb20gIkAvY29tcG9uZW50cy9QbGF5TXVzaWMudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gey8vIGlzUGxheWluZzogZmFsc2UsCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgSWNvbjogSWNvbiwKICAgIFBsYXlNdXNpYzogUGxheU11c2ljCiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZShbImlzUGxheWluZyIsICJzaG93UGxheU11c2ljIl0pKSwgbWFwR2V0dGVycyhbImN1cnJlbnRNdXNpYyJdKSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIGNvbnNvbGUubG9nKCJzdGF0ZSIpOwogICAgLy8gY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUpOwogICAgLy8gY29uc29sZS5sb2coInN0YXRlIik7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldFBsYXlGdW5jIiwgdGhpcy5wbGF5LmJpbmQodGhpcykpOwogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRQYXVzZUZ1bmMiLCB0aGlzLnBhdXNlLmJpbmQodGhpcykpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QXJ0aXN0czogZnVuY3Rpb24gZ2V0QXJ0aXN0cyhhcnRpc3RzLCBhbGJ1bSkgewogICAgICB2YXIgbmFtZXMgPSBhcnRpc3RzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLm5hbWU7CiAgICAgIH0pLmpvaW4oIiwgIik7CgogICAgICBpZiAoYWxidW0gJiYgYWxidW0ubmFtZSkgewogICAgICAgIG5hbWVzICs9ICIgLSAiICsgYWxidW0ubmFtZTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5hbWVzOwogICAgfSwKICAgIHBhdXNlOiBmdW5jdGlvbiBwYXVzZSgpIHsKICAgICAgaWYgKCF0aGlzLiRyZWZzLmF1ZGlvLnBhdXNlZCkgewogICAgICAgIHRoaXMuJHJlZnMuYXVkaW8ucGF1c2UoKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInN3aXRjaFBsYXlQYXVzZSIpOwogICAgICAgIGNvbnNvbGUubG9nKDEpOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXNQbGF5aW5nKTsKICAgICAgfQogICAgfSwKICAgIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLmF1ZGlvLnBhdXNlZCkgewogICAgICAgIHRoaXMuJHJlZnMuYXVkaW8ucGxheSgpOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic3dpdGNoUGxheVBhdXNlIik7CiAgICAgICAgY29uc29sZS5sb2coMik7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5pc1BsYXlpbmcpOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMuYXVkaW8pOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMuYXVkaW8ucGF1c2VkKTsKICAgICAgfSAvLyBlbHNlIHsKICAgICAgLy8gICB0aGlzLiRyZWZzLmF1ZGlvLnBhdXNlKCk7CiAgICAgIC8vICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzd2l0Y2hQbGF5UGF1c2UiKTsKICAgICAgLy8gICBjbGVhckludGVydmFsKHRoaXMuJHN0b3JlLnN0YXRlLmludElkKTsKICAgICAgLy8gfQoKICAgIH0sCiAgICBzd2l0Y2hQbGF5UGF1c2U6IGZ1bmN0aW9uIHN3aXRjaFBsYXlQYXVzZSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy4kcmVmcy5hdWRpbyk7CgogICAgICBpZiAodGhpcy4kcmVmcy5hdWRpby5wYXVzZWQpIHsKICAgICAgICB0aGlzLiRyZWZzLmF1ZGlvLnBsYXkoKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInN3aXRjaFBsYXlQYXVzZSIpOwogICAgICAgIGNvbnNvbGUubG9nKCLmkq3mlL4iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLmF1ZGlvLnBhdXNlKCk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzd2l0Y2hQbGF5UGF1c2UiKTsKICAgICAgICBjb25zb2xlLmxvZygi5pqC5YGcIik7CiAgICAgIH0KICAgIH0sCiAgICBzd2l0Y2hTaG93UGxheU11c2ljOiBmdW5jdGlvbiBzd2l0Y2hTaG93UGxheU11c2ljKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInN3aXRjaFNob3dQbGF5TXVzaWMiKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/lsn/code/musicapp/src/components/PlayController.vue"],"names":[],"mappings":";;;;AAsCA,SAAS,QAAT,EAAmB,UAAnB,QAAqC,MAArC;AAEA,OAAO,IAAP,MAAiB,uBAAjB;AACA,OAAO,SAAP,MAAsB,4BAAtB;AAEA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO,CACL;AADK,KAAP;AAGD,GALY;AAMb,EAAA,UAAU,EAAE;AACV,IAAA,IAAI,EAAJ,IADU;AAEV,IAAA,SAAS,EAAT;AAFU,GANC;AAUb,EAAA,QAAQ,kCACH,QAAQ,CAAC,CAAC,WAAD,EAAc,eAAd,CAAD,CADL,GAEH,UAAU,CAAC,CAAC,cAAD,CAAD,CAFP,CAVK;AAcb,EAAA,OAda,qBAcH;AACR;AACA;AACA;AACA,SAAK,MAAL,CAAY,MAAZ,CAAmB,aAAnB,EAAkC,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,CAAlC;AACA,SAAK,MAAL,CAAY,MAAZ,CAAmB,cAAnB,EAAmC,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,CAAnC;AACD,GApBY;AAqBb,EAAA,OAAO,EAAE;AACP,IAAA,UADO,sBACI,OADJ,EACa,KADb,EACoB;AACzB,UAAI,KAAI,GAAI,OAAO,CAAC,GAAR,CAAY,UAAC,IAAD;AAAA,eAAU,IAAI,CAAC,IAAf;AAAA,OAAZ,EAAiC,IAAjC,CAAsC,IAAtC,CAAZ;;AACA,UAAI,KAAI,IAAK,KAAK,CAAC,IAAnB,EAAyB;AACvB,QAAA,KAAI,IAAK,QAAQ,KAAK,CAAC,IAAvB;AACF;;AACA,aAAO,KAAP;AACD,KAPM;AAQP,IAAA,KARO,mBAQC;AACN,UAAI,CAAC,KAAK,KAAL,CAAW,KAAX,CAAiB,MAAtB,EAA8B;AAC5B,aAAK,KAAL,CAAW,KAAX,CAAiB,KAAjB;AACA,aAAK,MAAL,CAAY,MAAZ,CAAmB,iBAAnB;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;AAEA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAK,SAAjB;AACF;AACD,KAhBM;AAiBP,IAAA,IAjBO,kBAiBA;AACL,UAAI,KAAK,KAAL,CAAW,KAAX,CAAiB,MAArB,EAA6B;AAC3B,aAAK,KAAL,CAAW,KAAX,CAAiB,IAAjB;AACA,aAAK,MAAL,CAAY,MAAZ,CAAmB,iBAAnB;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAK,SAAjB;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAK,KAAL,CAAW,KAAvB;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAK,KAAL,CAAW,KAAX,CAAiB,MAA7B;AACF,OARK,CASL;AACA;AACA;AACA;AACA;;AACD,KA/BM;AAgCP,IAAA,eAhCO,6BAgCW;AAChB,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,KAAL,CAAW,KAAvB;;AACA,UAAI,KAAK,KAAL,CAAW,KAAX,CAAiB,MAArB,EAA6B;AAC3B,aAAK,KAAL,CAAW,KAAX,CAAiB,IAAjB;AACA,aAAK,MAAL,CAAY,MAAZ,CAAmB,iBAAnB;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACF,OAJA,MAIO;AACL,aAAK,KAAL,CAAW,KAAX,CAAiB,KAAjB;AACA,aAAK,MAAL,CAAY,MAAZ,CAAmB,iBAAnB;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACF;AACD,KA3CM;AA4CP,IAAA,mBA5CO,iCA4Ce;AACpB,WAAK,MAAL,CAAY,MAAZ,CAAmB,qBAAnB;AACD;AA9CM;AArBI,CAAf","sourcesContent":["<template>\n  <div class=\"playController\">\n    <div class=\"left\" @click=\"switchShowPlayMusic\">\n      <div class=\"cover\">\n        <img :src=\"currentMusic.al.picUrl\" alt=\"图片不见了\" />\n      </div>\n      <div class=\"content\">\n        <span class=\"title\">{{ currentMusic.name }}</span>\n        <span class=\"artist\">{{\n          getArtists(currentMusic.ar, currentMusic.al)\n        }}</span>\n      </div>\n    </div>\n    <div class=\"right\">\n      <icon\n        iconName=\"icon-24gl-play\"\n        class=\"play\"\n        v-show=\"!isPlaying\"\n        @click=\"play\"\n      />\n      <icon\n        iconName=\"icon-24gl-pause\"\n        class=\"play\"\n        v-show=\"isPlaying\"\n        @click=\"pause\"\n      />\n      <icon iconName=\"icon-danlieliebiao\" class=\"list\" />\n    </div>\n    <audio\n      controls\n      ref=\"audio\"\n      :src=\"`https://music.163.com/song/media/outer/url?id=${currentMusic.id}.mp3`\"\n    ></audio>\n    <play-music v-show=\"showPlayMusic\" />\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from \"vuex\";\n\nimport Icon from \"@/components/Icon.vue\";\nimport PlayMusic from \"@/components/PlayMusic.vue\";\n\nexport default {\n  data() {\n    return {\n      // isPlaying: false,\n    };\n  },\n  components: {\n    Icon,\n    PlayMusic,\n  },\n  computed: {\n    ...mapState([\"isPlaying\", \"showPlayMusic\"]),\n    ...mapGetters([\"currentMusic\"]),\n  },\n  mounted() {\n    // console.log(\"state\");\n    // console.log(this.$store.state);\n    // console.log(\"state\");\n    this.$store.commit(\"setPlayFunc\", this.play.bind(this));\n    this.$store.commit(\"setPauseFunc\", this.pause.bind(this));\n  },\n  methods: {\n    getArtists(artists, album) {\n      let names = artists.map((item) => item.name).join(\", \");\n      if (album && album.name) {\n        names += \" - \" + album.name;\n      }\n      return names;\n    },\n    pause() {\n      if (!this.$refs.audio.paused) {\n        this.$refs.audio.pause();\n        this.$store.commit(\"switchPlayPause\");\n        console.log(1);\n\n        console.log(this.isPlaying);\n      }\n    },\n    play() {\n      if (this.$refs.audio.paused) {\n        this.$refs.audio.play();\n        this.$store.commit(\"switchPlayPause\");\n        console.log(2);\n        console.log(this.isPlaying);\n        console.log(this.$refs.audio);\n        console.log(this.$refs.audio.paused);\n      }\n      // else {\n      //   this.$refs.audio.pause();\n      //   this.$store.commit(\"switchPlayPause\");\n      //   clearInterval(this.$store.state.intId);\n      // }\n    },\n    switchPlayPause() {\n      console.log(this.$refs.audio);\n      if (this.$refs.audio.paused) {\n        this.$refs.audio.play();\n        this.$store.commit(\"switchPlayPause\");\n        console.log(\"播放\");\n      } else {\n        this.$refs.audio.pause();\n        this.$store.commit(\"switchPlayPause\");\n        console.log(\"暂停\");\n      }\n    },\n    switchShowPlayMusic() {\n      this.$store.commit(\"switchShowPlayMusic\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.playController {\n  width: 7.5rem;\n  height: 1rem;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #ccc;\n  background: #fff;\n\n  .left {\n    height: 100%;\n    width: 5rem;\n    display: flex;\n    align-items: center;\n\n    .cover {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      padding: 0.2rem;\n\n      img {\n        width: 0.6rem;\n        // height: 0.5rem;\n        border-radius: 50%;\n      }\n    }\n\n    .content {\n      width: 3.6rem;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      text-align: left;\n\n      span {\n        width: 100%;\n      }\n\n      .title {\n        font-size: 0.3rem;\n        font-weight: 500;\n        width: 100%;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      }\n      .artist {\n        font-size: 0.15rem;\n        color: #777;\n        width: 100%;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      }\n    }\n  }\n\n  .right {\n    height: 100%;\n    width: 1rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-right: 0.2rem;\n\n    .play {\n    }\n\n    .list {\n      font-size: 0.4rem;\n    }\n  }\n}\n</style>"],"sourceRoot":""}]}