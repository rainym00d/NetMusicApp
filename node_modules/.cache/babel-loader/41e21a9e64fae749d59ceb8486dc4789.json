{"remainingRequest":"/Users/lsn/GitSpace/musicapp/node_modules/babel-loader/lib/index.js!/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lsn/GitSpace/musicapp/src/components/HomeMusicList.vue?vue&type=template&id=d9181f78&scoped=true","dependencies":[{"path":"/Users/lsn/GitSpace/musicapp/src/components/HomeMusicList.vue","mtime":1635938907679},{"path":"/Users/lsn/GitSpace/musicapp/babel.config.js","mtime":1635323562046},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js","mtime":1635338185367},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/babel-loader/lib/index.js","mtime":1635338186090},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1635338186544},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js","mtime":1635338185367},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/index.js","mtime":1635338186082}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aFNjb3BlSWQgPSBmdW5jdGlvbiBfd2l0aFNjb3BlSWQobikgewogIHJldHVybiBfcHVzaFNjb3BlSWQoImRhdGEtdi1kOTE4MWY3OCIpLCBuID0gbigpLCBfcG9wU2NvcGVJZCgpLCBuOwp9OwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgImNsYXNzIjogIm11c2ljTGlzdEJveCIKfTsKCnZhciBfaG9pc3RlZF8yID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZChmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgICAiY2xhc3MiOiAidGl0bGUiCiAgfSwgWy8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgewogICAgImNsYXNzIjogImZpbWRNdXNpY0xpc3QiCiAgfSwgIuWPkeeOsOWlveatjOWNlSIpLCAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIHsKICAgICJjbGFzcyI6ICJtb3JlIgogIH0sICLmn6XnnIvmm7TlpJoiKV0sIC0xCiAgLyogSE9JU1RFRCAqLwogICk7Cn0pOwoKdmFyIF9ob2lzdGVkXzMgPSB7CiAgcmVmOiAibXVzaWNMaXN0IiwKICAiY2xhc3MiOiAibXVzaWNMaXN0Igp9Owp2YXIgX2hvaXN0ZWRfNCA9IFsic3JjIl07CnZhciBfaG9pc3RlZF81ID0gewogICJjbGFzcyI6ICJuYW1lIgp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICAiY2xhc3MiOiAicGxheUNvdW50Igp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X2ljb24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiaWNvbiIpOwoKICB2YXIgX2NvbXBvbmVudF9yb3V0ZXJfbGluayA9IF9yZXNvbHZlQ29tcG9uZW50KCJyb3V0ZXItbGluayIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2hvaXN0ZWRfMiwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgImNsYXNzIjogIndyYXBwZXIiLAogICAgb25Ub3VjaHN0YXJ0OiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRvcHRpb25zLmhhbmRsZVN0YXJ0ICYmICRvcHRpb25zLmhhbmRsZVN0YXJ0LmFwcGx5KCRvcHRpb25zLCBhcmd1bWVudHMpOwogICAgfSksCiAgICBvblRvdWNobW92ZTogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkb3B0aW9ucy5oYW5kbGVNb3ZlICYmICRvcHRpb25zLmhhbmRsZU1vdmUuYXBwbHkoJG9wdGlvbnMsIGFyZ3VtZW50cyk7CiAgICB9KSwKICAgIG9uVG91Y2hlbmQ6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMuaGFuZGxlRW5kICYmICRvcHRpb25zLmhhbmRsZUVuZC5hcHBseSgkb3B0aW9ucywgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRkYXRhLm11c2ljTGlzdCwgZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X3JvdXRlcl9saW5rLCB7CiAgICAgIHRvOiB7CiAgICAgICAgcGF0aDogJy9saXN0dmlldycsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGlkOiBpdGVtLmlkCiAgICAgICAgfQogICAgICB9LAogICAgICByZWY6ICJtdXNpY0l0ZW0iLAogICAgICAiY2xhc3MiOiAibXVzaWNJdGVtIHN3aXBlci1zbGlkZSIsCiAgICAgIGtleTogaQogICAgfSwgewogICAgICAiZGVmYXVsdCI6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gW19jcmVhdGVFbGVtZW50Vk5vZGUoImltZyIsIHsKICAgICAgICAgIHNyYzogaXRlbS5waWNVcmwsCiAgICAgICAgICBhbHQ6ICLlm77niYfkuI3op4HkuoYiCiAgICAgICAgfSwgbnVsbCwgOAogICAgICAgIC8qIFBST1BTICovCiAgICAgICAgLCBfaG9pc3RlZF80KSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNSwgX3RvRGlzcGxheVN0cmluZyhpdGVtLm5hbWUpLCAxCiAgICAgICAgLyogVEVYVCAqLwogICAgICAgICksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzYsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9pY29uLCB7CiAgICAgICAgICBpY29uTmFtZTogImljb24tMjRnbC1wbGF5IgogICAgICAgIH0pLCBfY3JlYXRlVGV4dFZOb2RlKCIgIiArIF90b0Rpc3BsYXlTdHJpbmcoJG9wdGlvbnMuaGFuZGxlUGxheUNvdW50KGl0ZW0ucGxheUNvdW50KSksIDEKICAgICAgICAvKiBURVhUICovCiAgICAgICAgKV0pXTsKICAgICAgfSksCiAgICAgIF86IDIKICAgICAgLyogRFlOQU1JQyAqLwoKICAgIH0sIDEwMzIKICAgIC8qIFBST1BTLCBEWU5BTUlDX1NMT1RTICovCiAgICAsIFsidG8iXSk7CiAgfSksIDEyOAogIC8qIEtFWUVEX0ZSQUdNRU5UICovCiAgKSldLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKV0sIDMyCiAgLyogSFlEUkFURV9FVkVOVFMgKi8KICApXSk7Cn0="},{"version":3,"sources":["/Users/lsn/GitSpace/musicapp/src/components/HomeMusicList.vue"],"names":[],"mappings":";;;;;;;;AACO,WAAM;;;;sBACT,mBAAA,CAGM,KAHN,EAGM;AAHD,aAAM;AAGL,GAHN,EAAkB,C,aAChB,mBAAA,CAAwC,MAAxC,EAAwC;AAAlC,aAAM;AAA4B,GAAxC,EAA4B,OAA5B,CADgB,E,aAEhB,mBAAA,CAA8B,MAA9B,EAA8B;AAAxB,aAAM;AAAkB,GAA9B,EAAmB,MAAnB,CAFgB,CAAlB,E;;AAAA,G;;;;AAUO,EAAA,GAAG,EAAC,W;AAAY,WAAM;;;;AASlB,WAAM;;;AACN,WAAM;;;;;;;uBArBnB,mBAAA,CA4BM,KA5BN,EAAA,UAAA,EA4BM,CA3BJ,UA2BI,EAvBJ,mBAAA,CAsBM,KAtBN,EAsBM;AArBJ,aAAM,SAqBF;AApBH,IAAA,YAAU,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,WAAA,IAAA,QAAA,CAAA,WAAA,OAAA,QAAA,YAAF;AAAA,KAAA,CAoBP;AAnBH,IAAA,WAAS,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,UAAA,IAAA,QAAA,CAAA,UAAA,OAAA,QAAA,YAAF;AAAA,KAAA,CAmBN;AAlBH,IAAA,UAAQ,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,SAAA,IAAA,QAAA,CAAA,SAAA,OAAA,QAAA,YAAF;AAAA,KAAA;AAkBL,GAtBN,E,CAME,mBAAA,CAeM,KAfN,EAAA,UAAA,EAeM,E,kBAdJ,mBAAA,CAac,SAbd,EAac,IAbd,EAac,WAAA,CATQ,KAAA,CAAA,SASR,EATiB,UAArB,IAAqB,EAAf,CAAe,EAAd;yBAJjB,YAAA,CAac,sBAbd,EAac;AAZX,MAAA,EAAE,EAAA;AAAA,QAAA,IAAA,EAAA,WAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,EAAA,EAAoC,IAAI,CAAC;AAAzC;AAAA,OAYS;AAXZ,MAAA,GAAG,EAAC,WAWQ;AAVZ,eAAM,wBAUM;AARX,MAAA,GAAG,EAAE;AAQM,KAbd,E;0BAOE;AAAA,eAAsC,CAAtC,mBAAA,CAAsC,KAAtC,EAAsC;AAAhC,UAAA,GAAG,EAAE,IAAI,CAAC,MAAsB;AAAd,UAAA,GAAG,EAAC;AAAU,SAAtC,E,IAAA,E;;AAAA,U,UAAA,CAAsC,EACtC,mBAAA,CAAuC,KAAvC,EAAA,UAAA,EAAuC,gBAAA,CAAlB,IAAI,CAAC,IAAa,CAAvC,EAA8B;AAAA;AAA9B,SADsC,EAEtC,mBAAA,CAGM,KAHN,EAAA,UAAA,EAGM,CAFJ,YAAA,CAAkC,eAAlC,EAAkC;AAA5B,UAAA,QAAQ,EAAC;AAAmB,SAAlC,CAEI,E,iBAF8B,MAClC,gBAAA,CAAG,QAAA,CAAA,eAAA,CAAgB,IAAI,CAAC,SAArB,CAAH,C,EAAiC;AAAA;SAC7B,CAHN,CAFsC,CAAtC;AAAA,O;;;;KAPF,E;;AAAA,M,MAAA,C;GAac,CAbd,E;;AAAA,GAcI,EAfN,E;;AAAA,G,CANF,E;;AAAA,GAuBI,CA5BN,C","sourcesContent":["<template>\n  <div class=\"musicListBox\">\n    <div class=\"title\">\n      <span class=\"fimdMusicList\">发现好歌单</span>\n      <span class=\"more\">查看更多</span>\n    </div>\n    <div\n      class=\"wrapper\"\n      @touchstart=\"handleStart\"\n      @touchmove=\"handleMove\"\n      @touchend=\"handleEnd\"\n    >\n      <div ref=\"musicList\" class=\"musicList\">\n        <router-link\n          :to=\"{ path: '/listview', query: { id: item.id } }\"\n          ref=\"musicItem\"\n          class=\"musicItem swiper-slide\"\n          v-for=\"(item, i) in musicList\"\n          :key=\"i\"\n        >\n          <img :src=\"item.picUrl\" alt=\"图片不见了\" />\n          <div class=\"name\">{{ item.name }}</div>\n          <div class=\"playCount\">\n            <icon iconName=\"icon-24gl-play\" />\n            {{ handlePlayCount(item.playCount) }}\n          </div>\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getMusicList } from \"@/api/index\";\nimport Icon from \"@/components/Icon.vue\";\n\nexport default {\n  data() {\n    return {\n      musicList: [],\n      screenLength: 0,\n      listLength: 0,\n\n      startX: 0,\n      startLeft: 0,\n      distanceX: 0,\n      endLeft: 0,\n\n      touchLock: false,\n      moveLock: false,\n\n      isLeftBoundary: false,\n      isRightBoundary: false,\n    };\n  },\n  components: {\n    Icon,\n  },\n  async mounted() {\n    let res = await getMusicList();\n    this.musicList = res.data.result;\n\n    let rem = (this.rem = parseFloat(\n      getComputedStyle(document.documentElement).fontSize\n    ));\n    this.screenLength = parseFloat(\n      getComputedStyle(this.$refs.musicList).width\n    );\n    this.listLength = this.musicList.length * (2.25 + 0.2) * rem;\n    // console.log(this.listLength);\n  },\n  methods: {\n    handlePlayCount(playCount) {\n      let res = playCount;\n      if (playCount >= 100000000) {\n        res = playCount / 100000000;\n        res = res.toFixed(0) + \"亿\";\n      } else if (playCount >= 10000) {\n        res = playCount / 10000;\n        res = res.toFixed(0) + \"万\";\n      }\n      return res;\n    },\n\n    handleStart(e) {\n      if (e.targetTouches.length > 1) {\n        this.touchLock = false;\n        return;\n      } else {\n        this.touchLock = true;\n      }\n      this.startX = e.targetTouches[0].pageX;\n      this.startLeft = parseFloat(getComputedStyle(this.$refs.musicList).left);\n      // console.log(\"start: \" + this.startX);\n    },\n    handleMove(e) {\n      if (!this.touchLock) {\n        return;\n      }\n      if (!this.moveLock) {\n        this.moveLock = true;\n        this.distanceX = e.targetTouches[0].pageX - this.startX;\n        this.endLeft = this.startLeft + this.distanceX;\n        this.$refs.musicList.style.left = this.endLeft + \"px\";\n        // console.log(this.endLeft + \"  \" + -this.listLength);\n        if (this.endLeft > 0) {\n          this.isLeftBoundary = true;\n        } else if (this.endLeft < -(this.listLength - this.screenLength)) {\n          this.isRightBoundary = true;\n        } else {\n          this.isLeftBoundary = false;\n          this.isRightBoundary = false;\n        }\n        setTimeout(() => {\n          this.moveLock = false;\n        }, 50);\n      }\n    },\n    handleEnd() {\n      if (!this.touchLock) {\n        return;\n      }\n      console.log(\"move:  \" + this.distanceX);\n      if (this.isLeftBoundary) {\n        this.$refs.musicList.style.transition = \"left 0.1s ease-out\";\n        this.$refs.musicList.style.left = 0;\n      } else if (this.isRightBoundary) {\n        this.$refs.musicList.style.transition = \"left 0.1s ease-out\";\n        this.$refs.musicList.style.left =\n          -(this.listLength - this.screenLength) + \"px\";\n      }\n      // if (this.distanceX > 0) {\n\n      // }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.musicListBox {\n  width: 7.5rem;\n  padding: 0 0.15rem;\n  .title {\n    height: 0.8rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .fimdMusicList {\n      font-size: 0.4rem;\n      font-weight: 900;\n    }\n    .more {\n      border: 1px solid #ccc;\n      border-radius: 0.3rem;\n      padding: 0.06rem;\n      margin-right: 0.1rem;\n      font-size: 0.2rem;\n      font-weight: 400;\n    }\n  }\n  .wrapper {\n    width: 7.2;\n    overflow: hidden;\n\n    .musicList {\n      height: 3rem;\n      width: 100%;\n      // border: 1px solid;\n      display: flex;\n      position: relative;\n\n      left: 0;\n      transition: left 0.1s;\n      .musicItem {\n        display: flex;\n        flex-direction: column;\n        margin: 0 0.2rem 0 0;\n        position: relative;\n        img {\n          height: 2.25rem;\n          border-radius: 0.1rem;\n        }\n        .name {\n          height: 0.6;\n          width: 100%;\n          font-size: 0.1rem;\n          line-height: 0.35rem;\n          text-align: left;\n        }\n        .playCount {\n          position: absolute;\n          top: 0.1rem;\n          right: 0.1rem;\n          display: flex;\n          align-items: center;\n          color: #ccc;\n          border-radius: 0.1rem;\n          background-color: rgba(255, 255, 255, 0.2);\n          backdrop-filter: blur(10px);\n          font-size: 0.24rem;\n          font-weight: 500;\n          .icon {\n            margin: 0 0.05rem;\n          }\n        }\n      }\n    }\n  }\n}\n</style>"],"sourceRoot":""}]}