{"remainingRequest":"/Users/lsn/GitSpace/musicapp/node_modules/babel-loader/lib/index.js!/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lsn/GitSpace/musicapp/src/components/PlayController.vue?vue&type=template&id=cae31fc0&scoped=true","dependencies":[{"path":"/Users/lsn/GitSpace/musicapp/src/components/PlayController.vue","mtime":1636383954280},{"path":"/Users/lsn/GitSpace/musicapp/babel.config.js","mtime":1635323562046},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js","mtime":1635338185367},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/babel-loader/lib/index.js","mtime":1635338186090},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1635338186544},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/cache-loader/dist/cjs.js","mtime":1635338185367},{"path":"/Users/lsn/GitSpace/musicapp/node_modules/vue-loader-v16/dist/index.js","mtime":1635338186082}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgdlNob3cgYXMgX3ZTaG93LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aFNjb3BlSWQgPSBmdW5jdGlvbiBfd2l0aFNjb3BlSWQobikgewogIHJldHVybiBfcHVzaFNjb3BlSWQoImRhdGEtdi1jYWUzMWZjMCIpLCBuID0gbigpLCBfcG9wU2NvcGVJZCgpLCBuOwp9OwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgImNsYXNzIjogInBsYXlDb250cm9sbGVyIgp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICAiY2xhc3MiOiAiY292ZXIiCn07CnZhciBfaG9pc3RlZF8zID0gWyJzcmMiXTsKdmFyIF9ob2lzdGVkXzQgPSB7CiAgImNsYXNzIjogImNvbnRlbnQiCn07CnZhciBfaG9pc3RlZF81ID0gewogICJjbGFzcyI6ICJ0aXRsZSIKfTsKdmFyIF9ob2lzdGVkXzYgPSB7CiAgImNsYXNzIjogImFydGlzdCIKfTsKdmFyIF9ob2lzdGVkXzcgPSB7CiAgImNsYXNzIjogInJpZ2h0Igp9Owp2YXIgX2hvaXN0ZWRfOCA9IFsic3JjIl07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfaWNvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJpY29uIik7CgogIHZhciBfY29tcG9uZW50X3BsYXlfbXVzaWMgPSBfcmVzb2x2ZUNvbXBvbmVudCgicGxheS1tdXNpYyIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgImNsYXNzIjogImxlZnQiLAogICAgb25DbGljazogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkb3B0aW9ucy5zd2l0Y2hTaG93UGxheU11c2ljICYmICRvcHRpb25zLnN3aXRjaFNob3dQbGF5TXVzaWMuYXBwbHkoJG9wdGlvbnMsIGFyZ3VtZW50cyk7CiAgICB9KQogIH0sIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaW1nIiwgewogICAgc3JjOiBfY3R4LmN1cnJlbnRNdXNpYy5hbC5waWNVcmwsCiAgICBhbHQ6ICLlm77niYfkuI3op4HkuoYiCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBfaG9pc3RlZF8zKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF80LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIF9ob2lzdGVkXzUsIF90b0Rpc3BsYXlTdHJpbmcoX2N0eC5jdXJyZW50TXVzaWMubmFtZSksIDEKICAvKiBURVhUICovCiAgKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIF9ob2lzdGVkXzYsIF90b0Rpc3BsYXlTdHJpbmcoJG9wdGlvbnMuZ2V0QXJ0aXN0cyhfY3R4LmN1cnJlbnRNdXNpYy5hciwgX2N0eC5jdXJyZW50TXVzaWMuYWwpKSwgMQogIC8qIFRFWFQgKi8KICApXSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNywgW193aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9pY29uLCB7CiAgICBpY29uTmFtZTogImljb24tMjRnbC1wbGF5IiwKICAgICJjbGFzcyI6ICJwbGF5IiwKICAgIG9uQ2xpY2s6ICRvcHRpb25zLnBsYXkKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib25DbGljayJdKSwgW1tfdlNob3csICFfY3R4LmlzUGxheWluZ11dKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2ljb24sIHsKICAgIGljb25OYW1lOiAiaWNvbi0yNGdsLXBhdXNlIiwKICAgICJjbGFzcyI6ICJwbGF5IiwKICAgIG9uQ2xpY2s6ICRvcHRpb25zLnBhdXNlCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm9uQ2xpY2siXSksIFtbX3ZTaG93LCBfY3R4LmlzUGxheWluZ11dKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfaWNvbiwgewogICAgaWNvbk5hbWU6ICJpY29uLWRhbmxpZWxpZWJpYW8iLAogICAgImNsYXNzIjogImxpc3QiCiAgfSldKSwgX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIDxhdWRpb1xuICAgICAgY29udHJvbHNcbiAgICAgIHJlZj1cImF1ZGlvXCJcbiAgICAgIDpzcmM9XCJgaHR0cHM6Ly9tdXNpYy4xNjMuY29tL3NvbmcvbWVkaWEvb3V0ZXIvdXJsP2lkPSR7Y3VycmVudE11c2ljLmlkfS5tcDNgXCJcbiAgICA+PC9hdWRpbz4gIiksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImF1ZGlvIiwgewogICAgcmVmOiAiYXVkaW8iLAogICAgc3JjOiAiaHR0cHM6Ly9tdXNpYy4xNjMuY29tL3NvbmcvbWVkaWEvb3V0ZXIvdXJsP2lkPSIuY29uY2F0KF9jdHguY3VycmVudE11c2ljLmlkLCAiLm1wMyIpCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBfaG9pc3RlZF84KSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZShfY29tcG9uZW50X3BsYXlfbXVzaWMsIHsKICAgIG9uUGxheTogJG9wdGlvbnMucGxheSwKICAgIG9uUGF1c2U6ICRvcHRpb25zLnBhdXNlCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm9uUGxheSIsICJvblBhdXNlIl0pLCBbW192U2hvdywgX2N0eC5zaG93UGxheU11c2ljXV0pXSk7Cn0="},{"version":3,"sources":["/Users/lsn/GitSpace/musicapp/src/components/PlayController.vue"],"names":[],"mappings":";;;;;;;;AACO,WAAM;;;AAEF,WAAM;;;;AAGN,WAAM;;;AACH,WAAM;;;AACN,WAAM;;;AAKX,WAAM;;;;;;;;uBAZb,mBAAA,CAqCM,KArCN,EAAA,UAAA,EAqCM,CApCJ,mBAAA,CAUM,KAVN,EAUM;AAVD,aAAM,MAUL;AAVa,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,mBAAA,IAAA,QAAA,CAAA,mBAAA,OAAA,QAAA,YAAF;AAAA,KAAA;AAUlB,GAVN,E,CACE,mBAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADJ,mBAAA,CAAiD,KAAjD,EAAiD;AAA3C,IAAA,GAAG,EAAE,IAAA,CAAA,YAAA,CAAa,EAAb,CAAgB,MAAsB;AAAd,IAAA,GAAG,EAAC;AAAU,GAAjD,E,IAAA,E;;AAAA,I,UAAA,CACI,CAFN,C,EAGA,mBAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJJ,mBAAA,CAAkD,MAAlD,EAAA,UAAA,EAAkD,gBAAA,CAA3B,IAAA,CAAA,YAAA,CAAa,IAAc,CAAlD,EAAwC;AAAA;AAAxC,GAII,EAHJ,mBAAA,CAES,MAFT,EAAA,UAAA,EAES,gBAAA,CADP,QAAA,CAAA,UAAA,CAAW,IAAA,CAAA,YAAA,CAAa,EAAxB,EAA4B,IAAA,CAAA,YAAA,CAAa,EAAzC,CACO,CAFT,EAC6C;AAAA;AAD7C,GAGI,CALN,C,CAJF,CAoCI,EAzBJ,mBAAA,CAcM,KAdN,EAAA,UAAA,EAcM,C,gBAbJ,YAAA,CAKE,eALF,EAKE;AAJA,IAAA,QAAQ,EAAC,gBAIT;AAHA,aAAM,MAGN;AADC,IAAA,OAAK,EAAE,QAAA,CAAA;AACR,GALF,E,IAAA,E;;AAAA,I,WAAA,C,aAGW,IAAA,CAAA,S,GAUP,E,gBAPJ,YAAA,CAKE,eALF,EAKE;AAJA,IAAA,QAAQ,EAAC,iBAIT;AAHA,aAAM,MAGN;AADC,IAAA,OAAK,EAAE,QAAA,CAAA;AACR,GALF,E,IAAA,E;;AAAA,I,WAAA,C,YAGU,IAAA,CAAA,S,GAIN,EADJ,YAAA,CAAmD,eAAnD,EAAmD;AAA7C,IAAA,QAAQ,EAAC,oBAAoC;AAAf,aAAM;AAAS,GAAnD,CACI,CAdN,CAyBI,EAVJ,mBAAA,CAAA,qJAAA,CAUI,EALJ,mBAAA,CAGS,OAHT,EAGS;AAFP,IAAA,GAAG,EAAC,OAEG;AADN,IAAA,GAAG,0DAAmD,IAAA,CAAA,YAAA,CAAa,EAAhE;AACG,GAHT,E,IAAA,E;;AAAA,I,UAAA,CAKI,E,gBADJ,YAAA,CAAiE,qBAAjE,EAAiE;AAA7B,IAAA,MAAI,EAAE,QAAA,CAAA,IAAuB;AAAhB,IAAA,OAAK,EAAE,QAAA,CAAA;AAAS,GAAjE,E,IAAA,E;;AAAA,I,qBAAA,C,YAAoB,IAAA,CAAA,a,GAChB,CArCN,C","sourcesContent":["<template>\n  <div class=\"playController\">\n    <div class=\"left\" @click=\"switchShowPlayMusic\">\n      <div class=\"cover\">\n        <img :src=\"currentMusic.al.picUrl\" alt=\"图片不见了\" />\n      </div>\n      <div class=\"content\">\n        <span class=\"title\">{{ currentMusic.name }}</span>\n        <span class=\"artist\">{{\n          getArtists(currentMusic.ar, currentMusic.al)\n        }}</span>\n      </div>\n    </div>\n    <div class=\"right\">\n      <icon\n        iconName=\"icon-24gl-play\"\n        class=\"play\"\n        v-show=\"!isPlaying\"\n        @click=\"play\"\n      />\n      <icon\n        iconName=\"icon-24gl-pause\"\n        class=\"play\"\n        v-show=\"isPlaying\"\n        @click=\"pause\"\n      />\n      <icon iconName=\"icon-danlieliebiao\" class=\"list\" />\n    </div>\n    <!-- <audio\n      controls\n      ref=\"audio\"\n      :src=\"`https://music.163.com/song/media/outer/url?id=${currentMusic.id}.mp3`\"\n    ></audio> -->\n    <audio\n      ref=\"audio\"\n      :src=\"`https://music.163.com/song/media/outer/url?id=${currentMusic.id}.mp3`\"\n    ></audio>\n    <play-music v-show=\"showPlayMusic\" @play=\"play\" @pause=\"pause\" />\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from \"vuex\";\n\nimport Icon from \"@/components/Icon.vue\";\nimport PlayMusic from \"@/components/PlayMusic.vue\";\n\nexport default {\n  data() {\n    return {\n      // isPlaying: false,\n    };\n  },\n  components: {\n    Icon,\n    PlayMusic,\n  },\n  computed: {\n    ...mapState([\"isPlaying\", \"showPlayMusic\", \"intvalID\"]),\n    ...mapGetters([\"currentMusic\"]),\n  },\n  mounted() {\n    // console.log(\"state\");\n    // console.log(this.$store.state);\n    // console.log(\"state\");\n    this.$store.commit(\"setPlayFunc\", this.play.bind(this));\n    this.$store.commit(\"setPauseFunc\", this.pause.bind(this));\n  },\n  methods: {\n    getArtists(artists, album) {\n      let names = artists.map((item) => item.name).join(\", \");\n      if (album && album.name) {\n        names += \" - \" + album.name;\n      }\n      return names;\n    },\n    pause() {\n      if (!this.$refs.audio.paused) {\n        this.$refs.audio.pause();\n        this.$store.commit(\"switchPlayPause\");\n        // console.log(1);\n\n        // console.log(this.isPlaying);\n        // 暂停时清除定时器\n        clearInterval(this.intvalID);\n      }\n    },\n    play() {\n      if (this.$refs.audio.paused) {\n        this.$refs.audio.play();\n        this.$store.commit(\"switchPlayPause\");\n        // 设置定时器不断更新歌曲播放的当前时间\n        let id = setInterval(() => {\n          this.$store.commit(\"setCurrentTime\", this.$refs.audio.currentTime);\n          console.log(this.$store.state.currentTime);\n        }, 500);\n        this.$store.commit(\"setIntervalID\", id);\n        // console.log(2);\n        // console.log(this.isPlaying);\n        // console.log(this.$refs.audio);\n        // console.log(this.$refs.audio.paused);\n      }\n      // else {\n      //   this.$refs.audio.pause();\n      //   this.$store.commit(\"switchPlayPause\");\n      //   clearInterval(this.$store.state.intId);\n      // }\n    },\n    switchPlayPause() {\n      console.log(this.$refs.audio);\n      if (this.$refs.audio.paused) {\n        this.$refs.audio.play();\n        this.$store.commit(\"switchPlayPause\");\n        console.log(\"播放\");\n      } else {\n        this.$refs.audio.pause();\n        this.$store.commit(\"switchPlayPause\");\n        console.log(\"暂停\");\n      }\n    },\n    switchShowPlayMusic() {\n      this.$store.commit(\"switchShowPlayMusic\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.playController {\n  width: 7.5rem;\n  height: 1rem;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #ccc;\n  background: #fff;\n\n  .left {\n    height: 100%;\n    width: 5rem;\n    display: flex;\n    align-items: center;\n\n    .cover {\n      height: 100%;\n      display: flex;\n      align-items: center;\n      padding: 0.2rem;\n\n      img {\n        width: 0.6rem;\n        // height: 0.5rem;\n        border-radius: 50%;\n      }\n    }\n\n    .content {\n      width: 3.6rem;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      text-align: left;\n\n      span {\n        width: 100%;\n      }\n\n      .title {\n        font-size: 0.3rem;\n        font-weight: 500;\n        width: 100%;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      }\n      .artist {\n        font-size: 0.15rem;\n        color: #777;\n        width: 100%;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      }\n    }\n  }\n\n  .right {\n    height: 100%;\n    width: 1rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-right: 0.2rem;\n\n    .play {\n    }\n\n    .list {\n      font-size: 0.4rem;\n    }\n  }\n}\n</style>"],"sourceRoot":""}]}